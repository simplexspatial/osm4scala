<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<script src="gitter_conf.js"></script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer="defer"></script><title data-react-helmet="true">Scala library | osm4scala</title><meta data-react-helmet="true" property="og:url" content="https://simplexspatial.github.io/osm4scala//osm4scala/docs/standalone-scala-library"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Scala library | osm4scala"><meta data-react-helmet="true" name="description" content="With Osm4scala, you can forget about complexity of the osm.pbf format and think about a scala iterators of primitives"><meta data-react-helmet="true" property="og:description" content="With Osm4scala, you can forget about complexity of the osm.pbf format and think about a scala iterators of primitives"><link data-react-helmet="true" rel="shortcut icon" href="/osm4scala/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://simplexspatial.github.io/osm4scala//osm4scala/docs/standalone-scala-library"><link data-react-helmet="true" rel="alternate" href="https://simplexspatial.github.io/osm4scala//osm4scala/docs/standalone-scala-library" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://simplexspatial.github.io/osm4scala//osm4scala/docs/standalone-scala-library" hreflang="x-default"><link rel="stylesheet" href="/osm4scala/assets/css/styles.03c1686d.css">
<link rel="preload" href="/osm4scala/assets/js/styles.f80c1d3e.js" as="script">
<link rel="preload" href="/osm4scala/assets/js/runtime~main.29506a76.js" as="script">
<link rel="preload" href="/osm4scala/assets/js/main.0cfd6e2a.js" as="script">
<link rel="preload" href="/osm4scala/assets/js/common.5e559e9b.js" as="script">
<link rel="preload" href="/osm4scala/assets/js/2.be9bdef3.js" as="script">
<link rel="preload" href="/osm4scala/assets/js/13.7ac5621b.js" as="script">
<link rel="preload" href="/osm4scala/assets/js/14.309c5716.js" as="script">
<link rel="preload" href="/osm4scala/assets/js/935f2afb.f8ab1ee9.js" as="script">
<link rel="preload" href="/osm4scala/assets/js/17896441.130dd7f2.js" as="script">
<link rel="preload" href="/osm4scala/assets/js/3c491145.201f01ac.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/osm4scala/"><img src="/osm4scala/img/logo.svg" alt="osm4scala logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/osm4scala/img/logo.svg" alt="osm4scala logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">osm4scala</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/osm4scala/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/simplexspatial/osm4scala" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/osm4scala/"><img src="/osm4scala/img/logo.svg" alt="osm4scala logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/osm4scala/img/logo.svg" alt="osm4scala logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">osm4scala</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/osm4scala/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/simplexspatial/osm4scala" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Documentation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/osm4scala/docs/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/osm4scala/docs/spark-connector">Spark SQL Connector</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/osm4scala/docs/standalone-scala-library">Scala library</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/osm4scala/docs/performance">Performance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/osm4scala/docs/contributing">Contributing</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Scala library</h1></header><div class="markdown"><p>With Osm4scala, you can forget about complexity of the <code>osm.pbf</code> format and think about a <strong>scala iterators of primitives</strong>
(nodes, ways and relations) or blob blocks.</p><p>For example, counting all node primitives in a file is so simple as:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><div tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">EntityIterator.fromPbf(inputStream).count(_.osmModel == OSMTypes.Node)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This is a simple example, but because the iterator nature, you can use it for more complex tasks and patterns,
to process data at the same time you are reading with near zero memory usage, for example.</p><p>The library allows to read the pbf file on two different ways:</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="entity-iteration"></a>Entity iteration.<a class="hash-link" href="#entity-iteration" title="Direct link to heading">#</a></h2><p>OpenStreetMap is based in three different type of primitives:</p><ul><li>Nodes: Represented by the <code>NodeEntity</code> case class.</li><li>Ways: Represented by the <code>WayEntity</code> case class.</li><li>Relations: Represented by the <code>RelationEntity</code> case class.</li></ul><p>To iterate over all primitives in a file, the only step is create an iterator using the <code>EntityIterator</code> factory:</p><ul><li><code>EntityIterator.fromPbf(pbfInputStream: InputStream): EntityIterator</code> allows to create an iterator from any Java
InputStream.</li><li><code>EntityIterator.fromPbf(pbfInputStream: InputStreamSentinel): EntityIterator</code> allows to create an iterator from any
Java InputStream with a sentinel to stop under the defined condition.</li><li><code>EntityIterator.def fromBlob(blob: Blob): EntityIterator</code> allows to read a Blob block as and iterator.</li></ul><p>Every element in the iterator will be an Entity case class implementing an <code>OSMEntity</code> trait.</p><p>There is an example <a href="https://github.com/simplexspatial/osm4scala/tree/master/examples/counter/src/main/scala/com/acervera/osm4scala/examples/counter" target="_blank" rel="noopener noreferrer">in the repository</a>
that count all primitives with optional filtering by primitive type (Way, Node or Relation).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="blob-iteration"></a>Blob iteration<a class="hash-link" href="#blob-iteration" title="Direct link to heading">#</a></h2><p>Sometimes, it is better to split the read in two steps. Iterate over all blobs and, secondly, iterate over all entities
in avery blob.</p><p>To iterate over all blobs in a file, the only step is create an iterator using the <code>BlobTupleIterator</code> factory:</p><ul><li><code>BlobTupleIterator.fromPbf(pbfInputStream: InputStream): BlobTupleIterator</code> allows to create an iterator from any Java
InputStream.</li><li><code>BlobTupleIterator.fromPbf(pbfInputStream: InputStreamSentinel): BlobTupleIterator</code> allows to create an iterator from any
Java InputStream with a sentinel to stop under the defined condition.</li></ul><p>Every element in the iterator will be a <code>(BlobHeader, Blob)</code> tuple.</p><p>There is an example <a href="https://github.com/simplexspatial/osm4scala/tree/master/examples/blocksextraction/src/main/scala/com/acervera/osm4scala/examples/blocksextraction" target="_blank" rel="noopener noreferrer">in the repository</a>
that extract all block from a pbf file, and store them in a folder.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dependencies--download-core"></a>Dependencies: <a href="https://bintray.com/angelcervera/maven/osm4scala-core/_latestVersion" target="_blank" rel="noopener noreferrer"> <img src="https://api.bintray.com/packages/angelcervera/maven/osm4scala-core/images/download.svg" alt="Download Core"> </a><a class="hash-link" href="#dependencies--download-core" title="Direct link to heading">#</a></h2><ul><li><p>Import the library using sbt.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><div tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">libraryDependencies += &quot;com.acervera.osm4scala&quot; %% &quot;osm4scala-core&quot; % &quot;&lt;version&gt;&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>Import the library using maven.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly xml"><div tabindex="0" class="prism-code language-xml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">dependency</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">groupId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">com.acervera.osm4scala</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">groupId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">artifactId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">osm4scala-core_${scala-version}</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">artifactId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">version</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">${version}</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">version</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">dependency</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p><strong>Only if you have problems resolving dependencies without it</strong>, add my bintray repo:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly scala"><div tabindex="0" class="prism-code language-scala codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">resolvers += &quot;osm4scala repo&quot; at &quot;http://dl.bintray.com/angelcervera/maven&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/simplexspatial/osm4scala/edit/master/website/docs/standalone-scala-library.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/osm4scala/docs/spark-connector"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Spark SQL Connector</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/osm4scala/docs/performance"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Performance »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#entity-iteration" class="table-of-contents__link">Entity iteration.</a></li><li><a href="#blob-iteration" class="table-of-contents__link">Blob iteration</a></li><li><a href="#dependencies--download-core" class="table-of-contents__link">Dependencies:  Download Core </a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/osm4scala/docs/">Getting Started</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/search?q=osm4scala" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://gitter.im/osm4scala/talk" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/simplexspatial/osm4scala" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://www.acervera.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">About the author</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 <a href="https://www.acervera.com/" target="_blank">Ángel Cervera Claudio</a>. Supported by Simplexportal Ltd.</div></div></div></footer></div>
<script src="/osm4scala/assets/js/styles.f80c1d3e.js"></script>
<script src="/osm4scala/assets/js/runtime~main.29506a76.js"></script>
<script src="/osm4scala/assets/js/main.0cfd6e2a.js"></script>
<script src="/osm4scala/assets/js/common.5e559e9b.js"></script>
<script src="/osm4scala/assets/js/2.be9bdef3.js"></script>
<script src="/osm4scala/assets/js/13.7ac5621b.js"></script>
<script src="/osm4scala/assets/js/14.309c5716.js"></script>
<script src="/osm4scala/assets/js/935f2afb.f8ab1ee9.js"></script>
<script src="/osm4scala/assets/js/17896441.130dd7f2.js"></script>
<script src="/osm4scala/assets/js/3c491145.201f01ac.js"></script>
</body>
</html>